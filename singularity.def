WARNING Singularity doesn't support expansion, * found in src/*
WARNING src/* doesn't exist, ensure exists for build
Bootstrap: docker
From: ubuntu:20.04
Stage: spython-base

%files
src/* /genome-mosaic-maker/
%labels
author="Rodrigo Martin <rodrigo.martin@bsc.es>"
%post

PATH=$PATH:$HOME/bin
DEBIAN_FRONTEND=noninteractive

# Install dependencies
apt-get update && apt-get upgrade -y && apt-get install -y \
python3 \
python3-pip \
build-essential \
libz-dev \
libglib2.0-dev \
libbz2-dev \
liblzma-dev \
default-jre \
autoconf \
samtools

# Python dependencies
pip install pysam variant-extractor


# Copy scripts from src
%environment
export PATH=$PATH:$HOME/bin
%runscript
exec /bin/bash "$@"
%startscript
exec /bin/bash "$@"
